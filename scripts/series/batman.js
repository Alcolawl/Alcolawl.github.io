function choiceLauncher() { choice = document.getElementById("movieSelect").value, 1 == tableExists && ($(myTable).children().remove(), output = ""), createTable() } function createTable() { $.ajax({ type: "GET", url: "../../xml/series/batman.xml", dataType: "xml", success: function (t) { globalXml = t, iteration = 0, x = 1, tableExists = !0; for (var e = 1; 7 > e; e++) $(t).find("drink").each(function () { var t = "", t = $(this).find("rule" + String.fromCharCode(letter + e)).text(); return "" == t ? !1 : (output = output + "<tr><td>" + x + '.</td><td class="rule">' + t + "</td></tr>", void x++) }); choiceDelegation(), choiceDelegation(), choiceDelegation(), output += '<tr><th width="5%"></th><th>Finish Your Drink When:</th></tr>'; for (var e = 1; 7 > e; e++) $(t).find("finish").each(function () { var t = "", t = $(this).find("rule" + String.fromCharCode(letter + e)).text(); return "" == t ? !1 : (output = output + "<tr><td>" + x + '.</td><td class="rule">' + t + "</td></tr>", void x++) }); choiceDelegation() } }) } function choiceDelegation() { var t; if (1 == choice && (t = 65), 2 == choice && (t = 66), 3 == choice && (t = 67), iteration++, 1 == iteration) for (var e = 1; 7 > e; e++) $(globalXml).find("drink" + String.fromCharCode(t)).each(function () { var t = ""; letter++; var t = $(this).find("rule" + String.fromCharCode(letter)).text(); return "" == t ? !1 : (output = output + "<tr><td>" + x + '.</td><td class="rule">' + t + "</td></tr>", void x++) }); if (2 == iteration) { 3 > choice && (output += '<tr><th width="5%"></th><th>Take Two Drinks When:</th></tr>'); for (var e = 1; 7 > e; e++) $(globalXml).find("gulp" + String.fromCharCode(t)).each(function () { var t = ""; letter++; var t = $(this).find("rule" + String.fromCharCode(letter)).text(); return "" == t ? !1 : (output = output + "<tr><td>" + x + '.</td><td class="rule">' + t + "</td></tr>", void x++) }) } if (3 == iteration) { 2 == choice && (output += '<tr><th width="5%"></th><th>Chug For 5 Seconds When:</th></tr>'); for (var e = 1; 7 > e; e++) $(globalXml).find("chug" + String.fromCharCode(t)).each(function () { var t = ""; letter++; var t = $(this).find("rule" + String.fromCharCode(letter)).text(); return "" == t ? !1 : (output = output + "<tr><td>" + x + '.</td><td class="rule">' + t + "</td></tr>", void x++) }) } if (4 == iteration) { for (var e = 1; 7 > e; e++) $(globalXml).find("finish" + String.fromCharCode(t)).each(function () { var t = ""; letter++; var t = $(this).find("rule" + String.fromCharCode(letter)).text(); return "" == t ? !1 : (output = output + "<tr><td>" + x + '.</td><td class="rule">' + t + "</td></tr>", void x++) }); myTable.innerHTML = finalize + output } letter = 64 } var iteration = 0, choice = 1, x = 1, letter = 64, output = "", finalize = '<tr><th width="5%"></th><th>Take a Drink when:</th></tr>', myTable = document.getElementById("rulesTable"), tableExists = !1, globalXml;